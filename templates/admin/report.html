{% extends 'admin/base_site.html' %}
{% block title %}Отчет - {{ block.super }}{% endblock %}
{% block content %}
  <div class="dashboard">
    <h1>Отчет</h1>
    <div class="section">
      <h2>Количество членских билетов: {{ membership_count }}</h2>
    </div>
    <div class="section">
      <h2>Общее количество точек: {{ point_count }}</h2>
    </div>
    <div class="section">
      <h2>Количество точек по видам</h2>
      <ul>
        {% for type in types %}<li>{{ type.name }}: {{ type.count }}</li>{% endfor %}
      </ul>
    </div>
    <div class="section">
      <h2>Точка с самым высоким рейтингом:</h2>
      {% if highest_rated_point %}
        <p>
          {{ highest_rated_point.name }} - Рейтинг:
          {% if highest_rated_point.avg_rating%}
            {{ highest_rated_point.avg_rating|floatformat:1 }}
          {% else %}
            Нет оценок
          {% endif %}
        </p>
      {% else %}
        <p>Нет доступных точек</p>
      {% endif %}
    </div>
    <div class="section">
      <h2>Точка с самым низким рейтингом:</h2>
      {% if lowest_rated_point %}
        <p>
          {{ lowest_rated_point.name }} - Рейтинг:
          {% if lowest_rated_point.avg_rating %}
            {{ lowest_rated_point.avg_rating|floatformat:1 }}
          {% else %}
            Нет оценок
          {% endif %}
        </p>
      {% else %}
        <p>Нет доступных точек</p>
      {% endif %}
    </div>
  </div>
{% endblock %}
